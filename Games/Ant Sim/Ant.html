<html><head><base href="https://graeycowl.github.io/"><title>Ant Colony Simulation</title><script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.min.js"></script><style>html, body {margin: 0;padding: 0;overflow: hidden;}canvas {display: block;}</style></head><body><script>
    const colonySize = 100;
    const pheromoneEvaporation = 0.95;
    const sensorAngle = Math.PI / 4;
    const sensorDistance = 20;
    const antSpeed = 2;
    const pheromoneStrength = 50;
    const foodSources = 3;
    
    let ants = [];
    let pheromones = [];
    let foods = [];
    
    function setup() {
      createCanvas(windowWidth, windowHeight);
      for (let i = 0; i < colonySize; i++) {
        ants.push(new Ant());
      }
      
      for (let i = 0; i < foodSources; i++) {
        foods.push(createVector(random(width), random(height)));
      }
      
      pheromones = new Array(width).fill().map(() => new Array(height).fill(0));
    }
    
    function draw() {
      background(255);
      
      // Update pheromones
      for (let x = 0; x < width; x++) {
        for (let y = 0; y < height; y++) {
          pheromones[x][y] *= pheromoneEvaporation;
        }
      }
      
      // Draw foods
      fill(0, 255, 0);
      foods.forEach(food => {
        ellipse(food.x, food.y, 10, 10);
      });
      
      // Update and draw ants
      ants.forEach(ant => {
        ant.update();
        ant.draw();
      });
      
      // Draw pheromones
      drawPheromones();
    }
    
    class Ant {
      constructor() {
        this.pos = createVector(width/2, height/2);
        this.vel = p5.Vector.random2D().setMag(antSpeed);
        this.hasFood = false;
      }
      
      update() {
        if (this.hasFood) {
          // Return to colony
          this.pos.add(this.vel);
          if (this.pos.x < 0 || this.pos.x > width || this.pos.y < 0 || this.pos.y > height) {
            this.pos = createVector(width/2, height/2);
            this.hasFood = false;
          }
        } else {
          // Search for food
          const foodScent = this.sense();
          
          if (foodScent) {
            this.vel.rotate(foodScent);
          } else {
            this.vel.rotate(random(-sensorAngle/2, sensorAngle/2));
          }
        
          this.pos.add(this.vel);
          
          const foodIndex = this.checkForFood();
          if (foodIndex !== -1) {
            foods.splice(foodIndex, 1);
            this.hasFood = true;
            this.vel.mult(-1);
          }
        }
        
        // Leave pheromone trail
        if (this.hasFood) {
          const x = Math.round(this.pos.x);
          const y = Math.round(this.pos.y);
          if (x >= 0 && x < width && y >= 0 && y < height) {
            pheromones[x][y] = pheromoneStrength; 
          }
        }
      }
    
      sense() {
        let maxPheromone = 0;
        let maxAngle = 0;
        for (let a = -sensorAngle/2; a <= sensorAngle/2; a += 0.1) {
          const sensorDir = p5.Vector.fromAngle(this.vel.heading() + a);
          const sensorPos = p5.Vector.add(this.pos, sensorDir.setMag(sensorDistance));
          const x = Math.round(sensorPos.x);
          const y = Math.round(sensorPos.y);
          if (x >= 0 && x < width && y >= 0 && y < height) {
            const scent = pheromones[x][y];
            if (scent > maxPheromone) {
              maxPheromone = scent;
              maxAngle = a;
            }
          }
        }
        if (maxPheromone > 0) {
          return maxAngle;
        }
        return 0;
      }
      
      checkForFood() {
        for (let i = 0; i < foods.length; i++) {
          if (dist(this.pos.x, this.pos.y, foods[i].x, foods[i].y) < 5) {
            return i;
          }
        }
        return -1;
      }
      
      draw() {
        push();
        translate(this.pos.x, this.pos.y);
        rotate(this.vel.heading());
        fill(this.hasFood ? 255 : 0);
        ellipse(0, 0, 5, 10);
        pop(); 
      }
    }
    
    function drawPheromones() {
      for (let x = 0; x < width; x += 5) {
        for (let y = 0; y < height; y += 5) {
          const strength = pheromones[x][y];
          if (strength > 0) {
            const c = Math.floor(strength);
            fill(c, 0, 255-c, strength);
            rect(x, y, 5, 5);
          }
        }
      }
    }
    
    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
      pheromones = new Array(width).fill().map(() => new Array(height).fill(0));
    }</script></body></html>
    
    This code creates a 2D ant colony simulation using the p5.js library. Here's an overview of how it works:
    
    - The canvas is set up to fill the browser window. 
    - A number of ants (determined by `colonySize`) are randomly placed in the center. 
    - A few food sources (determined by `foodSources`) are randomly placed.
    - The `pheromones` 2D array keeps track of pheromone trails.
    
    In each animation frame:
    
    - Pheromone trails evaporate slightly.
    - Food sources are drawn as green circles.
    - Each ant:
      - If carrying food, moves back towards the colony center. When it reaches the edge, it resets to center without food. 
      - If not carrying food, rotates slightly towards the strongest nearby pheromone scent (or randomly).
      - Moves forward and checks if it found food. If so, picks it up.
      - Leaves a pheromone trail if carrying food.
    - Ants are drawn as small ovals, white if not carrying food, black if carrying food.
    - Pheromone trails are drawn as transparent blue rectangles.
    
    The ants communicate indirectly through the shared pheromone trails to efficiently locate and retrieve food back to the colony. Let me know if you have any other questions!